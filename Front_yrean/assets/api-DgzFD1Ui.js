const s="http://44.201.125.158:5001/api",o=()=>{const e=sessionStorage.getItem("user");if(!e)return{};try{return{Authorization:`Bearer ${JSON.parse(e).user_id}`}}catch(n){return console.error("Error parsing user data:",n),{}}},d={async login(e,n){return(await fetch(`${s}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:n})})).json()},async register(e,n,t){return(await fetch(`${s}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,email:n,password:t})})).json()}},l={async createPresentation(e,n,t){console.log("title",n),console.log("description",t);const r=await fetch(`${s}/presentations`,{method:"POST",headers:{"Content-Type":"application/json",...o()},body:JSON.stringify({user_id:e,title:n,description:t})});return console.log("response",r),r.json()},async getPresentation(e){return(await fetch(`${s}/presentations/${e}`,{method:"GET",headers:{"Content-Type":"application/json",...o()}})).json()},async getUserPresentations(e){console.log("user_id",e),console.log("API_BASE_URL",s);const n=await fetch(`${s}/user/${e}/presentations`,{method:"GET",headers:{"Content-Type":"application/json",...o()}});return console.log(n),n.json()},async updatePresentation(e,n){return(await fetch(`${s}/presentations/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",...o()},body:JSON.stringify(n)})).json()},async deletePresentation(e){return(await fetch(`${s}/presentations/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json",...o()}})).json()},async createSlide(e,n,t="#FFFFFF",r=null,a="",i=1,p="cover"){return(await fetch(`${s}/presentations/${e}/slides`,{method:"POST",headers:{"Content-Type":"application/json",...o()},body:JSON.stringify({slide_number:n,background_color:t,background_image_url:r,title:a,background_image_opacity:i,background_image_fit:p})})).json()},async updateSlide(e,n,t,r,a,i=1,p="cover"){return(await fetch(`${s}/slides/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",...o()},body:JSON.stringify({slide_number:n,background_color:t,background_image_url:r,title:a,background_image_opacity:i,background_image_fit:p})})).json()},async deleteSlide(e){return(await fetch(`${s}/slides/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json",...o()}})).json()},async getSlideElements(e){return(await fetch(`${s}/slides/${e}/elements`,{method:"GET",headers:{"Content-Type":"application/json",...o()}})).json()},async createTextElement(e,n){return(await fetch(`${s}/slides/${e}/elements/text`,{method:"POST",headers:{"Content-Type":"application/json",...o()},body:JSON.stringify({...n,element_type:"text"})})).json()},async updateElement(e,n){return(await fetch(`${s}/elements/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",...o()},body:JSON.stringify(n)})).json()},async deleteElement(e){return(await fetch(`${s}/elements/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json",...o()}})).json()},async uploadImage(e){const n=new FormData;return n.append("file",e),(await fetch(`${s}/upload/image`,{method:"POST",headers:o(),body:n})).json()},async createImageElement(e,n){return(await fetch(`${s}/slides/${e}/elements/image`,{method:"POST",headers:{"Content-Type":"application/json",...o()},body:JSON.stringify({...n,element_type:"image"})})).json()}},h=e=>e.response?e.response.data.error||"An error occurred":e.message||"An unexpected error occurred";export{d as a,h,l as p};
