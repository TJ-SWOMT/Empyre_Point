import{r as l,c as p,a as r,b as g,w as v,v as m,t as u,i as f,o as h}from"./index-YTt2fp9I.js";import{p as P,h as w}from"./api-DgzFD1Ui.js";const x={class:"create-presentation-container"},b={class:"presentation-form"},y={class:"form-group"},C={class:"char-count"},E={class:"form-group"},S={class:"char-count"},V=["disabled"],k={key:0,class:"error-message"},U={__name:"CreatePresentationView",setup(D){const d=f(),n=l(""),o=l(""),a=l(""),i=l(!1),_=async()=>{var s;if(!n.value.trim()){a.value="Please enter a title";return}const c=sessionStorage.getItem("user");if(!c){a.value="Please log in to create a presentation",d.push("/login");return}let e;try{const t=JSON.parse(c);if(!t||!t.user_id)throw new Error("Invalid user data");e=t.user_id}catch(t){console.error("Error parsing user data:",t),a.value="Session expired. Please log in again.",d.push("/login");return}try{i.value=!0,a.value="";const t=await P.createPresentation(e,n.value.trim(),o.value.trim());t.success&&((s=t.presentation)!=null&&s.presentation_id)?d.push(`/presentations/${t.presentation.presentation_id}`):a.value=t.error||"Failed to create presentation"}catch(t){a.value=w(t)}finally{i.value=!1}};return(c,e)=>(h(),p("div",x,[e[4]||(e[4]=r("div",{class:"create-presentation-header"},[r("div",{class:"create-presentation-title"},"Create New Presentation")],-1)),r("div",b,[r("div",y,[e[2]||(e[2]=r("label",{for:"title"},"Presentation Title",-1)),v(r("input",{id:"title","onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s),type:"text",placeholder:"Enter presentation title",required:"",maxlength:"32"},null,512),[[m,n.value]]),r("div",C,u(n.value.length)+"/32 characters",1)]),r("div",E,[e[3]||(e[3]=r("label",{for:"description"},"Description (Optional)",-1)),v(r("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=s=>o.value=s),placeholder:"Enter presentation description",rows:"3",maxlength:"200"},null,512),[[m,o.value]]),r("div",S,u(o.value.length)+"/200 characters",1)]),r("button",{onClick:_,disabled:i.value},u(i.value?"Creating...":"Create Presentation"),9,V),a.value?(h(),p("div",k,u(a.value),1)):g("",!0)])]))}};export{U as default};
