import{r as l,j as E,c as n,a as o,t as i,b as u,F as D,k as L,i as N,o as a,h as V}from"./index-YTt2fp9I.js";import{p as f,h as y}from"./api-DgzFD1Ui.js";const x={class:"page-content-wrapper"},A={class:"page-header"},B={class:"page-header-text"},F={class:"view-area-container"},I={key:0,class:"error-message"},O={key:1,class:"loading"},U={key:2,class:"no-presentations"},M={key:3,class:"presentations-grid"},Y={class:"presentation-card-content"},j={class:"description-container"},q={key:0,class:"truncated-description"},J={key:1,class:"tooltip"},R={class:"presentation-meta"},$={key:0},z={class:"presentation-actions-row"},G=["onClick"],H=["onClick"],X={__name:"UserPresentationsView",setup(K){const v=N(),_=l([]),d=l(""),p=l(!0),h=l(""),r=l({}),g=async()=>{try{p.value=!0;const e=JSON.parse(sessionStorage.getItem("user"));if(h.value=e.username,console.log(e),!e||!e.user_id)throw new Error("User not found");const s=await f.getUserPresentations(e.user_id);if(console.log("response",s),console.log(s.presentations),s.error)throw new Error(s.error);_.value=s.presentations||[]}catch(e){d.value=y(e)}finally{p.value=!1}},S=()=>{v.push("/create-presentation")},w=e=>{v.push(`/presentations/${e}`)},k=(e,s)=>{console.log("checkSureness",e,s),sessionStorage.setItem("pId",e),sessionStorage.setItem("e",s),console.log("presentationSureness",r.value),r.value[e]=!r.value[e],console.log("presentationSureness",r.value)},b=async(e,s)=>{s.preventDefault(),s.stopPropagation();try{await f.deletePresentation(e),await g()}catch(t){d.value=y(t)}},P=(e,s)=>{console.log("resetSureness",e,s),r.value[e]||(r.value[e]=!1),k(sessionStorage.getItem("pId"),sessionStorage.getItem("e"))};return((e,s)=>{document.addEventListener("click",t=>{const c=document.querySelectorAll(e);let m=!1;c.forEach(C=>{C.contains(t.target)&&(m=!0)}),m||s()})})("#delete-presentation-button",()=>P()),E(g),(e,s)=>(a(),n("div",x,[o("div",A,[o("div",B,i(h.value)+"'s Presentations ",1)]),o("div",F,[d.value?(a(),n("div",I,i(d.value),1)):u("",!0),p.value?(a(),n("div",O,"Loading presentations...")):_.value.length===0?(a(),n("div",U,[s[0]||(s[0]=o("p",null,"You haven't created any presentations yet.",-1)),o("button",{onClick:S,class:"btn btn-secondary"}," Create Your First Presentation ")])):(a(),n("div",M,[(a(!0),n(D,null,L(_.value,t=>(a(),n("div",{key:t.presentation_id,class:"presentation-card"},[o("div",Y,[o("h3",null,i(t.title),1),o("div",j,[t.description?(a(),n("p",q,i(t.description),1)):u("",!0),t.description?(a(),n("div",J,i(t.description),1)):u("",!0)]),o("div",R,[o("span",null,"Created: "+i(new Date(t.created_at).toLocaleDateString()),1),t.slide_count?(a(),n("span",$,"Slides: "+i(t.slide_count),1)):u("",!0)]),o("div",z,[o("button",{onClick:c=>w(t.presentation_id),class:"btn btn-secondary"}," View Presentation ",8,G),o("button",{onClick:V(c=>r.value[t.presentation_id]?b(t.presentation_id,c):k(t.presentation_id,c),["stop"]),class:"btn btn-danger delete-presentation-button"},i(r.value[t.presentation_id]?"Click again to delete":"Delete Presentation"),9,H)])])]))),128))]))])]))}};export{X as default};
